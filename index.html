<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêç Snakes & Boosters Race Deluxe</title>
<style>
/* ===== BASE & TYPOGRAPHY ===== */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    margin: 0;
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #333;
}

header h1 {
    font-size: 2em;
    color: #fff;
    text-shadow: 2px 2px #ff4081;
    margin-bottom: 10px;
    text-align: center;
}

/* ===== GAME CONTAINER ===== */
#game-container {
    width: 100%;
    max-width: 600px;
    background: #fff;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

/* ===== PLAYER STATUS ===== */
#player-status {
    background: #f3e5f5;
    padding: 12px;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    margin-bottom: 15px;
    text-align: center;
    transition: all 0.3s;
}
#player-status.active-red { border: 3px solid #e53935; }
#player-status.active-blue { border: 3px solid #1e88e5; }

/* ===== GAME BOARD ===== */
#game-board {
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    grid-template-rows: repeat(10, 1fr);
    width: 100%;
    aspect-ratio: 1/1;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
    margin-bottom: 15px;
}

.square {
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 0.8em;
    border: 1px solid #ccc;
    position: relative;
    transition: all 0.3s ease;
}
.square.finish {
    font-size: 1.2em;
    font-weight: bold;
    color: white;
    background: linear-gradient(45deg, #4caf50, #81c784);
}

/* Special Squares */
.square.booster { background: linear-gradient(135deg, #a5d6a7, #66bb6a); color: green; }
.square.hazard { background: linear-gradient(135deg, #ef9a9a, #e53935); color: white; }
.square.skip { background: linear-gradient(135deg, #fff59d, #fbc02d); color: #333; }
.square.double { background: linear-gradient(135deg, #90caf9, #42a5f5); color: white; }

/* ===== PLAYER TOKENS ===== */
.token {
    position: absolute;
    width: 50%;
    height: 50%;
    border-radius: 50%;
    z-index: 10;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    color: white;
    font-size: 1.2em;
    transition: transform 0.5s ease;
}
.token-red { background: #e53935; }
.token-blue { background: #1e88e5; }

/* ===== DICE & ACTIONS ===== */
#action-area {
    text-align: center;
    margin-bottom: 10px;
}
#dice-display {
    font-size: 40px;
    font-weight: bold;
    margin: 10px auto;
    width: 80px;
    height: 80px;
    line-height: 80px;
    border-radius: 15px;
    background: linear-gradient(145deg, #fff, #f3e5f5);
    border: 4px solid #ff4081;
}
#roll-button, #reset-button {
    margin-top: 10px;
    padding: 12px 20px;
    font-size: 1em;
    font-weight: bold;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    color: white;
    background: #ff4081;
    box-shadow: 0 4px 0 #c51162;
    transition: all 0.1s;
}
#roll-button:active, #reset-button:active {
    transform: translateY(2px);
    box-shadow: 0 2px 0 #c51162;
}

/* ===== GAME MESSAGE ===== */
#game-message {
    font-weight: bold;
    font-size: 1em;
    min-height: 20px;
    margin-top: 5px;
}

/* ===== ONLINE AREA ===== */
#online-area {
    margin-top: 15px;
    text-align: center;
}
#room-code-display {
    font-size: 1.3em;
    padding: 6px 10px;
    border: 2px dashed #00bcd4;
    border-radius: 6px;
    display: inline-block;
    margin-bottom: 10px;
    background-color: #e0f7fa;
}

/* ===== MODAL ===== */
.modal {
    display: none;
    position: fixed;
    z-index: 100;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.7);
    justify-content: center;
    align-items: center;
}
.modal-content {
    background: #fff;
    border-radius: 15px;
    padding: 20px;
    max-width: 400px;
    width: 90%;
    text-align: left;
    border: 3px solid #ff4081;
}
.close-btn {
    float: right;
    font-size: 28px;
    cursor: pointer;
    color: #aaa;
}
.close-btn:hover { color: #f44336; }

/* ===== SOUND EFFECT BUTTON ===== */
#sound-toggle {
    margin-top: 10px;
    padding: 6px 10px;
    font-size: 0.9em;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background: #ff9800;
    color: #fff;
}
</style>
</head>
<body>

<header>
    <h1>üêç Snakes & Boosters Deluxe üöÄ</h1>
</header>

<div id="game-container">
    <div id="player-status" class="active-red">
        <h2>Current Turn: <span id="current-player-display">RED</span></h2>
        <p>RED: <span id="pos-red">1</span> | BLUE: <span id="pos-blue">1</span></p>
        <p id="game-message">Roll the dice to start!</p>
    </div>

    <div id="game-board">
        <div class="token token-red" data-player="red">R</div>
        <div class="token token-blue" data-player="blue">B</div>
    </div>

    <div id="action-area">
        <div id="dice-display"><span id="current-roll">?</span></div>
        <button id="roll-button">ROLL DICE üé≤</button>
        <button id="reset-button">RESET GAME üîÑ</button>
        <button id="sound-toggle">Sound: ON üîä</button>
    </div>

    <div id="online-area">
        <p>Room Code: <span id="room-code-display">ABC123</span></p>
        <button id="save-button" style="background:#00bcd4;color:white;border-radius:8px;padding:10px 15px;">Save Game</button>
        <button onclick="document.getElementById('instructions-modal').style.display='flex'" style="background:#795548;color:white;border-radius:8px;padding:10px 15px;">Instructions</button>
    </div>
</div>

<div id="instructions-modal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="document.getElementById('instructions-modal').style.display='none'">&times;</span>
        <h2>Game Rules üêç</h2>
        <hr>
        <p><strong>Goal:</strong> Reach exactly Square 100 first!</p>
        <ul>
            <li>üü¢ Booster: Move up to target square.</li>
            <li>üî¥ Hazard: Slide down to target square.</li>
            <li>üü° Skip: Lose next turn.</li>
            <li>üîµ Double: Roll again immediately.</li>
        </ul>
    </div>
</div>

<script>
const DOM = {
    board: document.getElementById('game-board'),
    roll: document.getElementById('current-roll'),
    message: document.getElementById('game-message'),
    rollButton: document.getElementById('roll-button'),
    resetButton: document.getElementById('reset-button'),
    currentPlayerDisplay: document.getElementById('current-player-display'),
    posRed: document.getElementById('pos-red'),
    posBlue: document.getElementById('pos-blue'),
    tokenRed: document.querySelector('.token-red'),
    tokenBlue: document.querySelector('.token-blue'),
    roomCode: document.getElementById('room-code-display'),
    modal: document.getElementById('instructions-modal'),
    status: document.getElementById('player-status'),
    soundToggle: document.getElementById('sound-toggle')
};

const BOARD_SIZE = 100;
const SPECIAL_SQUARES = {
    4: {type:'booster', target:35, icon:'‚¨ÜÔ∏è'},
    13: {type:'booster', target:45, icon:'‚¨ÜÔ∏è'},
    27: {type:'booster', target:76, icon:'‚¨ÜÔ∏è'},
    49: {type:'booster', target:88, icon:'‚¨ÜÔ∏è'},
    98: {type:'hazard', target:54, icon:'‚ò†Ô∏è'},
    80: {type:'hazard', target:38, icon:'‚ò†Ô∏è'},
    55: {type:'hazard', target:12, icon:'‚ò†Ô∏è'},
    32: {type:'hazard', target:2, icon:'‚ò†Ô∏è'},
    20: {type:'skip', icon:'üõë'},
    70: {type:'skip', icon:'üõë'},
    40: {type:'double', icon:'üé≤'},
    90: {type:'double', icon:'üé≤'}
};

let gameState = {
    playerPositions: {red:1, blue:1},
    currentPlayer:'red',
    lastRoll:0,
    roomCode:'DELUXE',
    skipTurn:{red:false, blue:false},
    sound:true
};

// --- SOUND EFFECTS ---
const sounds = {
    booster: new Audio('https://www.myinstants.com/media/sounds/bling.mp3'),
    hazard: new Audio('https://www.myinstants.com/media/sounds/fail-trombone.mp3'),
    win: new Audio('https://www.myinstants.com/media/sounds/vine-boom.mp3'),
    dice: new Audio('https://www.myinstants.com/media/sounds/dice-roll.mp3')
};

// --- UTILITY FUNCTIONS ---
function generateRoomCode(){
    const chars='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let code='';
    for(let i=0;i<6;i++){ code+=chars.charAt(Math.floor(Math.random()*chars.length)); }
    gameState.roomCode=code;
    DOM.roomCode.textContent=code;
}

function getCoords(square){
    const row=Math.floor((square-1)/10);
    let col=(square-1)%10;
    const actualRow=9-row;
    if(actualRow%2!==0) col=9-col;
    return {row:actualRow, col};
}

function renderBoard(){
    DOM.board.innerHTML='';
    for(let i=1;i<=BOARD_SIZE;i++){
        const sq=document.createElement('div');
        sq.className='square';
        sq.textContent=i;
        sq.dataset.number=i;
        const coords=getCoords(i);
        sq.style.gridRowStart=coords.row+1;
        sq.style.gridColumnStart=coords.col+1;
        if(i===BOARD_SIZE) sq.classList.add('finish');
        if(SPECIAL_SQUARES[i]){
            sq.classList.add(SPECIAL_SQUARES[i].type);
            const icon=document.createElement('span');
            icon.textContent=SPECIAL_SQUARES[i].icon;
            icon.style.fontSize='1.2em';
            sq.appendChild(icon);
        }
        DOM.board.appendChild(sq);
    }
    DOM.board.appendChild(DOM.tokenRed);
    DOM.board.appendChild(DOM.tokenBlue);
}

function updateTokenPosition(player,pos){
    const token=player==='red'?DOM.tokenRed:DOM.tokenBlue;
    const coords=getCoords(pos);
    token.style.transform=`translate(${coords.col*100}%, ${coords.row*100}%)`;
}

function updateDisplay(){
    DOM.currentPlayerDisplay.textContent=gameState.currentPlayer.toUpperCase();
    DOM.posRed.textContent=gameState.playerPositions.red;
    DOM.posBlue.textContent=gameState.playerPositions.blue;
    updateTokenPosition('red', gameState.playerPositions.red);
    updateTokenPosition('blue', gameState.playerPositions.blue);
    DOM.status.className = `active-${gameState.currentPlayer}`;
}

// --- GAME LOGIC ---
function movePlayer(player, diceRoll){
    let newPos=gameState.playerPositions[player]+diceRoll;
    let message=`${player.toUpperCase()} rolled ${diceRoll}. Moving to ${newPos}.`;
    let bonus=false;
    if(newPos>BOARD_SIZE){
        message=`${player.toUpperCase()} must roll ${BOARD_SIZE-gameState.playerPositions[player]} to win!`;
        DOM.message.textContent=message;
        return bonus;
    }
    gameState.playerPositions[player]=newPos;
    updateTokenPosition(player,newPos);

    if(SPECIAL_SQUARES[newPos]){
        const sq=SPECIAL_SQUARES[newPos];
        switch(sq.type){
            case 'booster': gameState.playerPositions[player]=sq.target; message+=` BOOSTER! Jump to ${sq.target}`; if(gameState.sound)sounds.booster.play(); break;
            case 'hazard': gameState.playerPositions[player]=sq.target; message+=` HAZARD! Slide to ${sq.target}`; if(gameState.sound)sounds.hazard.play(); break;
            case 'skip': gameState.skipTurn[player]=true; message+=' SKIP! Lose next turn.'; break;
            case 'double': bonus=true; message+=' DOUBLE! Roll again!'; break;
        }
    }

    if(gameState.playerPositions[player]===BOARD_SIZE){
        message=`üéâ ${player.toUpperCase()} WINS!`;
        DOM.rollButton.disabled=true;
        if(gameState.sound)sounds.win.play();
    }

    DOM.message.textContent=message;
    return bonus;
}

function handleRoll(){
    if(DOM.rollButton.disabled) return;
    const player=gameState.currentPlayer;
    if(gameState.skipTurn[player]){
        DOM.message.textContent=`${player.toUpperCase()} skipping turn!`;
        gameState.skipTurn[player]=false;
        switchTurn();
        return;
    }
    const roll=Math.floor(Math.random()*6)+1;
    gameState.lastRoll=roll;
    DOM.roll.textContent=roll;
    if(gameState.sound)sounds.dice.play();
    DOM.rollButton.disabled=true;
    setTimeout(()=>{
        const bonus=movePlayer(player,roll);
        if(bonus) DOM.rollButton.disabled=false;
        else if(gameState.playerPositions[player]!==BOARD_SIZE) switchTurn();
    },700);
}

function switchTurn(){
    gameState.currentPlayer=gameState.currentPlayer==='red'?'blue':'red';
    DOM.rollButton.disabled=false;
    updateDisplay();
    DOM.message.textContent=`${gameState.currentPlayer.toUpperCase()}'s turn. Roll the dice!`;
}

function saveGame(){
    localStorage.setItem('snakesBoostersSave',JSON.stringify(gameState));
    DOM.message.textContent=`Game saved! Code: ${gameState.roomCode}`;
}

function loadGame(){
    const saved=localStorage.getItem('snakesBoostersSave');
    if(saved){
        gameState=JSON.parse(saved);
        DOM.message.textContent=`Game loaded! ${gameState.currentPlayer.toUpperCase()}'s turn.`;
    } else {
        generateRoomCode();
        DOM.message.textContent='Welcome! Roll to start!';
        DOM.modal.style.display='flex';
    }
    renderBoard();
    updateDisplay();
}

function resetGame(){
    gameState={playerPositions:{red:1,blue:1},currentPlayer:'red',lastRoll:0,roomCode:'DELUXE',skipTurn:{red:false,blue:false},sound:gameState.sound};
    DOM.rollButton.disabled=false;
    DOM.currentPlayerDisplay.textContent='RED';
    DOM.roll.textContent='?';
    updateDisplay();
    DOM.message.textContent='Game reset! Roll to start.';
}

// --- SOUND TOGGLE ---
DOM.soundToggle.addEventListener('click',()=>{
    gameState.sound=!gameState.sound;
    DOM.soundToggle.textContent=`Sound: ${gameState.sound?'ON üîä':'OFF üîá'}`;
});

// --- EVENTS ---
DOM.rollButton.addEventListener('click',handleRoll);
DOM.resetButton.addEventListener('click',resetGame);
document.getElementById('save-button').addEventListener('click',saveGame);
document.addEventListener('DOMContentLoaded', loadGame);
window.onclick = (e)=>{if(e.target==DOM.modal) DOM.modal.style.display='none';}
</script>
</body>
    </html>
